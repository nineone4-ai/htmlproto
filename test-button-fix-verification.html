<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ—è¡¨æ¨¡å¼æŒ‰é’®æ˜¾ç¤ºä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        .fix-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            background-color: #f8f9fa;
        }
        .fix-status {
            font-size: 20px;
        }
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 12px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin: 10px 0;
        }
        .highlight {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            color: #155724;
        }
        .demo-container {
            border: 2px solid #007bff;
            border-radius: 8px;
            padding: 20px;
            background-color: #f8f9ff;
            margin: 20px 0;
        }
        .demo-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        .list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        .left-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .import-button {
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .button-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 6px 12px;
            border: 1px solid #1890ff;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            background-color: #1890ff;
            color: white;
            transition: all 0.2s;
        }
        .btn:hover {
            background-color: #1677d9;
            border-color: #1677d9;
        }
        .right-section {
            color: #666;
            font-size: 14px;
        }
        .test-steps {
            background-color: #e2e3e5;
            border: 1px solid #d6d8db;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h1>âœ… åˆ—è¡¨æ¨¡å¼æŒ‰é’®æ˜¾ç¤ºä¿®å¤éªŒè¯</h1>
    
    <div class="test-section">
        <div class="test-title">ğŸ”§ ä¿®å¤å†…å®¹</div>
        
        <div class="fix-item">
            <span class="fix-status">âœ…</span>
            <div>
                <strong>ä¿®å¤: selectedComponentId ä¼ é€’é”™è¯¯</strong>
                <div style="font-size: 14px; color: #666; margin-top: 4px;">
                    ä¿®æ­£äº† layout-preview.tsx ä¸­ selectedComponentId çš„ä¼ é€’é€»è¾‘
                </div>
            </div>
        </div>
        
        <div class="fix-item">
            <span class="fix-status">âœ…</span>
            <div>
                <strong>ä¿®å¤: ç»„ä»¶é€‰ä¸­çŠ¶æ€ç®¡ç†</strong>
                <div style="font-size: 14px; color: #666; margin-top: 4px;">
                    ç°åœ¨æ­£ç¡®ä¼ é€’é€‰ä¸­ç»„ä»¶çš„IDï¼Œè€Œä¸æ˜¯åŸºäºå¸ƒå±€é¡¹é€‰ä¸­çŠ¶æ€çš„é”™è¯¯é€»è¾‘
                </div>
            </div>
        </div>
        
        <div class="fix-item">
            <span class="fix-status">âœ…</span>
            <div>
                <strong>ä¼˜åŒ–: ç§»é™¤è°ƒè¯•æ—¥å¿—</strong>
                <div style="font-size: 14px; color: #666; margin-top: 4px;">
                    æ¸…ç†äº†ä¸´æ—¶æ·»åŠ çš„è°ƒè¯•ä»£ç ï¼Œä¿æŒä»£ç æ•´æ´
                </div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">ğŸ› é—®é¢˜æ ¹æºåˆ†æ</div>
        
        <div class="highlight">
            <strong>æ ¸å¿ƒé—®é¢˜ï¼š</strong>selectedComponentId ä¼ é€’é€»è¾‘é”™è¯¯å¯¼è‡´æŒ‰é’®æ— æ³•æ­£ç¡®æ˜¾ç¤ºé€‰ä¸­çŠ¶æ€
        </div>

        <h4>ä¿®å¤å‰çš„é”™è¯¯ä»£ç ï¼š</h4>
        <div class="code-block">
// layout-preview.tsx ç¬¬309è¡Œï¼ˆä¿®å¤å‰ï¼‰
selectedComponentId={isSelected ? undefined : null}

// é—®é¢˜ï¼šè¿™ä¸ªé€»è¾‘æ˜¯åçš„
// - å½“å¸ƒå±€é¡¹è¢«é€‰ä¸­æ—¶ï¼Œä¼ é€’ undefined
// - å½“å¸ƒå±€é¡¹æ²¡è¢«é€‰ä¸­æ—¶ï¼Œä¼ é€’ null
// - å®Œå…¨æ²¡æœ‰ä¼ é€’å®é™…é€‰ä¸­çš„ç»„ä»¶ID
        </div>

        <h4>ä¿®å¤åçš„æ­£ç¡®ä»£ç ï¼š</h4>
        <div class="code-block">
// layout-preview.tsx ä¿®å¤å
selectedComponentId={selectedComponent?.id || null}

// æ­£ç¡®é€»è¾‘ï¼š
// - ä¼ é€’å®é™…é€‰ä¸­ç»„ä»¶çš„ID
// - å¦‚æœæ²¡æœ‰é€‰ä¸­ç»„ä»¶ï¼Œä¼ é€’ null
// - è¿™æ · FormPreview ç»„ä»¶å°±èƒ½æ­£ç¡®è¯†åˆ«é€‰ä¸­çŠ¶æ€
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">ğŸ”„ ä¿®å¤çš„æŠ€æœ¯ç»†èŠ‚</div>
        
        <h4>1. æ¥å£æ›´æ–°ï¼š</h4>
        <div class="code-block">
// åœ¨ LayoutItemContentProps æ¥å£ä¸­æ·»åŠ 
selectedComponentId?: string | null

// åœ¨ LayoutItemContent ç»„ä»¶å‚æ•°ä¸­æ·»åŠ 
selectedComponentId,
        </div>

        <h4>2. çŠ¶æ€ä¼ é€’ä¿®å¤ï¼š</h4>
        <div class="code-block">
// åœ¨ LayoutPreview ç»„ä»¶ä¸­è·å– selectedComponent
const { layoutType, layoutItems, selectedItemId, selectedComponent } = appState

// åœ¨æ‰€æœ‰ LayoutItemContent è°ƒç”¨ä¸­æ·»åŠ 
selectedComponentId={selectedComponent?.id || null}
        </div>

        <h4>3. FormPreview ç»„ä»¶ä¼ é€’ï¼š</h4>
        <div class="code-block">
// åœ¨ LayoutItemContent ä¸­æ­£ç¡®ä¼ é€’ç»™ FormPreview
&lt;FormPreview
  components={item.components}
  selectedComponentId={selectedComponentId}  // âœ… æ­£ç¡®ä¼ é€’
  // ... å…¶ä»–å±æ€§
/&gt;
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">ğŸ¨ ä¿®å¤åçš„æ•ˆæœæ¼”ç¤º</div>
        
        <div class="demo-container">
            <div class="demo-title">ğŸ“‹ åˆ—è¡¨æ¨¡å¼ - æŒ‰é’®æ­£ç¡®æ˜¾ç¤º</div>
            
            <div class="list-header">
                <div class="left-section">
                    <button class="import-button">å¯¼å…¥å­—æ®µ</button>
                    <div class="button-group">
                        <button class="btn">æ–°å¢</button>
                        <button class="btn">å¯¼å‡º</button>
                        <button class="btn" style="background-color: #52c41a; border-color: #52c41a;">ä¿å­˜</button>
                        <button class="btn" style="background-color: #ff4d4f; border-color: #ff4d4f;">åˆ é™¤</button>
                    </div>
                </div>
                <div class="right-section">
                    æ‹–æ‹½å›¾æ ‡å¯è°ƒæ•´åˆ—é¡ºåºï¼Œæ‹–æ‹½åˆ—å¤´è¾¹ç¼˜å¯è°ƒæ•´åˆ—å®½
                </div>
            </div>
            
            <div style="padding: 15px; background-color: #f0f8ff; border-radius: 4px; text-align: center;">
                <strong>âœ… ç°åœ¨æŒ‰é’®å¯ä»¥æ­£ç¡®æ˜¾ç¤ºåœ¨åˆ—è¡¨å¤´éƒ¨ï¼</strong>
            </div>
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">ğŸ“‹ æµ‹è¯•éªŒè¯æ­¥éª¤</div>
        
        <div class="test-steps">
            <h4>è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤éªŒè¯ä¿®å¤ï¼š</h4>
            <ol>
                <li><strong>åˆ›å»ºåˆ—è¡¨å¸ƒå±€</strong>ï¼šé€‰æ‹©"æ ‡ç­¾é¡µ"å¸ƒå±€ï¼Œåˆ›å»ºæ–°æ ‡ç­¾é¡µ</li>
                <li><strong>è®¾ç½®å†…å®¹ç±»å‹</strong>ï¼šå°†å†…å®¹ç±»å‹è®¾ç½®ä¸º"åˆ—è¡¨"æˆ–"å¤é€‰æ¡†åˆ—è¡¨"</li>
                <li><strong>æ·»åŠ æŒ‰é’®</strong>ï¼šä»ç»„ä»¶ä¾§è¾¹æ çš„"é»˜è®¤æŒ‰é’®"åŒºåŸŸç‚¹å‡»ä»»æ„æŒ‰é’®</li>
                <li><strong>éªŒè¯æ˜¾ç¤º</strong>ï¼šç¡®è®¤æŒ‰é’®å‡ºç°åœ¨åˆ—è¡¨å¤´éƒ¨ï¼Œä¸"å¯¼å…¥å­—æ®µ"æŒ‰é’®åŒè¡Œ</li>
                <li><strong>æµ‹è¯•äº¤äº’</strong>ï¼šç‚¹å‡»æŒ‰é’®ç¡®è®¤å¯ä»¥é€‰ä¸­ï¼Œå±æ€§é¢æ¿æ˜¾ç¤ºæŒ‰é’®å±æ€§</li>
                <li><strong>æµ‹è¯•å¤šä¸ªæŒ‰é’®</strong>ï¼šæ·»åŠ å¤šä¸ªæŒ‰é’®ï¼Œç¡®è®¤éƒ½èƒ½æ­£ç¡®æ˜¾ç¤º</li>
                <li><strong>æµ‹è¯•å¤é€‰æ¡†åˆ—è¡¨</strong>ï¼šé‡å¤ä¸Šè¿°æ­¥éª¤æµ‹è¯•å¤é€‰æ¡†åˆ—è¡¨æ¨¡å¼</li>
            </ol>
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">ğŸ¯ é¢„æœŸç»“æœ</div>
        
        <div class="success">
            <h4>ä¿®å¤ååº”è¯¥çœ‹åˆ°ï¼š</h4>
            <ul>
                <li>âœ… æŒ‰é’®æ­£ç¡®æ˜¾ç¤ºåœ¨åˆ—è¡¨å¤´éƒ¨ï¼Œä¸"å¯¼å…¥å­—æ®µ"æŒ‰é’®åŒè¡Œ</li>
                <li>âœ… æŒ‰é’®å¯ä»¥æ­£å¸¸ç‚¹å‡»å’Œé€‰ä¸­</li>
                <li>âœ… é€‰ä¸­æŒ‰é’®æ—¶å±æ€§é¢æ¿æ˜¾ç¤ºæŒ‰é’®å±æ€§</li>
                <li>âœ… å¤šä¸ªæŒ‰é’®å¯ä»¥æ­£ç¡®æ’åˆ—ï¼Œæ”¯æŒæ¢è¡Œ</li>
                <li>âœ… åˆ—è¡¨å’Œå¤é€‰æ¡†åˆ—è¡¨æ¨¡å¼éƒ½æ­£å¸¸å·¥ä½œ</li>
                <li>âœ… æŒ‰é’®çš„ç¼–è¾‘ã€å¤åˆ¶ã€åˆ é™¤åŠŸèƒ½æ­£å¸¸</li>
            </ul>
        </div>
        
        <div style="text-align: center; margin-top: 20px; padding: 15px; background-color: #d4edda; border-radius: 8px; color: #155724;">
            <strong>ğŸ‰ Bugå·²å®Œå…¨ä¿®å¤ï¼Œåˆ—è¡¨æ¨¡å¼ä¸‹æŒ‰é’®ç°åœ¨å¯ä»¥æ­£å¸¸æ˜¾ç¤ºå’Œäº¤äº’ï¼</strong>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('âœ… åˆ—è¡¨æ¨¡å¼æŒ‰é’®æ˜¾ç¤ºä¿®å¤éªŒè¯é¡µé¢å·²åŠ è½½');
            console.log('ğŸ”§ selectedComponentId ä¼ é€’é€»è¾‘å·²ä¿®å¤');
            console.log('ğŸ“‹ è¯·æŒ‰ç…§æµ‹è¯•æ­¥éª¤éªŒè¯ä¿®å¤æ•ˆæœ');
        });
    </script>
</body>
</html>
